(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{860:(e,t,r)=>{"use strict";r.d(t,{default:()=>E});var n,s,a,l=r(5155),i=r(2115),o=i.forwardRef(function({control:e,...t},r){let n=i.useRef(null);return i.useLayoutEffect(()=>{let t=n.current;if(!t)return;if(customElements.get("openai-chatkit"))return void t.setOptions(e.options);let r=!0;return customElements.whenDefined("openai-chatkit").then(()=>{r&&t.setOptions(e.options)}),()=>{r=!1}},[e.options]),(0,l.jsx)("openai-chatkit",{ref:t=>{if(n.current=t,e.setInstance(t),"function"==typeof r?r(t):r&&(r.current=t),!n.current)return;let s={"chatkit.error":"onError","chatkit.response.end":"onResponseEnd","chatkit.response.start":"onResponseStart","chatkit.log":"onLog","chatkit.thread.change":"onThreadChange","chatkit.thread.load.start":"onThreadLoadStart","chatkit.thread.load.end":"onThreadLoadEnd"};for(let t of Object.keys(s))n.current.addEventListener(t,r=>{let n=e.handlers[s[t]];"function"==typeof n&&n(r.detail)})},...t})});function c(e){return null!==e&&"object"==typeof e&&[null,Object.prototype].includes(Object.getPrototypeOf(e))||Array.isArray(e)}var d=Object.freeze(["focusComposer","setThreadId","sendUserMessage","setComposerValue","fetchUpdates","sendCustomAction"]),u=r(5704);let h=null!==(s="wf_68f72684f9bc8190ba24c84c4b9869bf08fe753aa2c80608".trim())&&void 0!==s?s:"",f=null!=(a=null==(n=u.env.NEXT_PUBLIC_CHATKIT_CREATE_SESSION_ENDPOINT)?void 0:n.trim())?a:"/api/create-session",m=[{label:"What can you do?",prompt:"What can you do?",icon:"circle-question"}];function p(e){let{error:t,fallbackMessage:r,onRetry:n,retryLabel:s}=e;if(!t&&!r)return null;let a=null!=t?t:r;return a?(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 flex h-full w-full flex-col justify-center rounded-[inherit] bg-white/85 p-6 text-center backdrop-blur dark:bg-slate-900/90",children:(0,l.jsxs)("div",{className:"pointer-events-auto mx-auto w-full max-w-md rounded-xl bg-white px-6 py-4 text-lg font-medium text-slate-700 dark:bg-transparent dark:text-slate-100",children:[(0,l.jsx)("div",{children:a}),t&&n?(0,l.jsx)("button",{type:"button",className:"mt-4 inline-flex items-center justify-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-none transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-500 focus-visible:ring-offset-2 dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200",onClick:n,children:null!=s?s:"Restart chat"}):null]})}):null}let b=()=>({script:null,session:null,integration:null,retryable:!1});function g(e){var t,r;let{theme:n,onWidgetAction:s,onResponseEnd:a,onThemeRequest:u}=e,g=(0,i.useRef)(new Set),[x,w]=(0,i.useState)(()=>b()),[k,y]=(0,i.useState)(!0),v=(0,i.useRef)(!0),[j,E]=(0,i.useState)(()=>{var e;return(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?"ready":"pending"}),[N,C]=(0,i.useState)(0),S=(0,i.useCallback)(e=>{w(t=>({...t,...e}))},[]);(0,i.useEffect)(()=>()=>{v.current=!1},[]),(0,i.useEffect)(()=>{var e;let t,r=()=>{v.current&&(E("ready"),S({script:null}))},n=e=>{var t;if(console.error("Failed to load chatkit.js for some reason",e),!v.current)return;E("error");let r=null!=(t=null==e?void 0:e.detail)?t:"unknown error";S({script:"Error: ".concat(r),retryable:!1}),y(!1)};return window.addEventListener("chatkit-script-loaded",r),window.addEventListener("chatkit-script-error",n),(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?r():"pending"===j&&(t=window.setTimeout(()=>{var e;(null==(e=window.customElements)?void 0:e.get("openai-chatkit"))||n(new CustomEvent("chatkit-script-error",{detail:"ChatKit web component is unavailable. Verify that the script URL is reachable."}))},5e3)),()=>{window.removeEventListener("chatkit-script-loaded",r),window.removeEventListener("chatkit-script-error",n),t&&window.clearTimeout(t)}},[j,S]);let _=!!(h&&!h.startsWith("wf_replace"));(0,i.useEffect)(()=>{!_&&v.current&&(S({session:"Set NEXT_PUBLIC_CHATKIT_WORKFLOW_ID in your .env.local file.",retryable:!1}),y(!1))},[_,S]);let L=(0,i.useCallback)(()=>{var e;g.current.clear(),E((null==(e=window.customElements)?void 0:e.get("openai-chatkit"))?"ready":"pending"),y(!0),w(b()),C(e=>e+1)},[]),T=function(e){let t=i.useRef(null),r=function(e){let t=i.useRef(e);t.current=e;let r=i.useRef(null);return r.current&&function e(t,r,n=new WeakMap){if(Object.is(t,r))return!0;if("function"==typeof t&&"function"==typeof r)return typeof t==typeof r;if(!c(t)||!c(r))return!1;let s=n.get(t);if(s&&s===r)return!0;if(n.set(t,r),Array.isArray(t)||Array.isArray(r)){if(!Array.isArray(t)||!Array.isArray(r)||t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],r[s],n))return!1;return!0}let a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(let s=0;s<a.length;s++){let l=a[s];if(!Object.prototype.hasOwnProperty.call(r,l)||!e(t[l],r[l],n))return!1}return!0}(r.current.snapshot,e)||(r.current={snapshot:e,shaped:function(e){let t=[],r=n=>{if("function"==typeof n){let r,n=t[t.length-1];return r=t.slice(0,-1),(...t)=>{let s,a=(s=e.current,r.reduce((e,t)=>null==e?e:e[t],s)),l=a?.[n];if("function"==typeof l)return l.apply(a,t)}}if(Array.isArray(n)){let e=t.length,s=Array(n.length);for(let a=0;a<n.length;a++)t[e]=a,s[a]=r(n[a]);return t.length=e,s}if(n&&"object"==typeof n){let e=t.length,s={};for(let a of Object.keys(n))t[e]=a,s[a]=r(n[a]);return t.length=e,s}return n};return r(e.current)}(t)}),r.current.shaped}(e),n=i.useMemo(()=>d.reduce((e,r)=>(e[r]=(...e)=>t.current?t.current[r](...e):void console.warn("ChatKit element is not mounted"),e),{}),[]),s=i.useCallback(e=>{t.current=e},[]),a=i.useMemo(()=>{let e={},t={};for(let[n,s]of Object.entries(r))/^on[A-Z]/.test(n)&&"onClientTool"!==n?t[n]=s:e[n]=s;return{setInstance:s,options:e,handlers:t}},[r,s]);return i.useMemo(()=>({...n,control:a,ref:t}),[n,a])}({api:{getClientSecret:(0,i.useCallback)(async e=>{if(!_){let e="Set NEXT_PUBLIC_CHATKIT_WORKFLOW_ID in your .env.local file.";throw v.current&&(S({session:e,retryable:!1}),y(!1)),Error(e)}v.current&&(e||y(!0),S({session:null,integration:null,retryable:!1}));try{let e=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{id:h},chatkit_configuration:{file_upload:{enabled:!0}}})}),t=await e.text(),r={};if(t)try{r=JSON.parse(t)}catch(e){console.error("Failed to parse create-session response",e)}if(!e.ok){let t=function(e,t){if(!e)return t;let r=e.error;if("string"==typeof r)return r;if(r&&"object"==typeof r&&"message"in r&&"string"==typeof r.message)return r.message;let n=e.details;if("string"==typeof n)return n;if(n&&"object"==typeof n&&"error"in n){let e=n.error;if("string"==typeof e)return e;if(e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message)return e.message}return"string"==typeof e.message?e.message:t}(r,e.statusText);throw console.error("Create session request failed",{status:e.status,body:r}),Error(t)}let n=null==r?void 0:r.client_secret;if(!n)throw Error("Missing client secret in response");return v.current&&S({session:null,integration:null}),n}catch(t){console.error("Failed to create ChatKit session",t);let e=t instanceof Error?t.message:"Unable to start ChatKit session.";throw v.current&&S({session:e,retryable:!1}),t instanceof Error?t:Error(e)}finally{v.current&&!e&&y(!1)}},[_,S])},theme:{colorScheme:n,color:{grayscale:{hue:220,tint:6,shade:"dark"===n?-1:-4},accent:{primary:"dark"===n?"#f1f5f9":"#0f172a",level:1}},radius:"round"},startScreen:{greeting:"How can I help you today?",prompts:m},composer:{placeholder:"Ask anything...",attachments:{enabled:!0}},threadItemActions:{feedback:!1},onClientTool:async e=>{if("switch_theme"===e.name){let t=e.params.theme;return"light"===t||"dark"===t?(u(t),{success:!0}):{success:!1}}if("record_fact"===e.name){var t,r;let n=String(null!=(t=e.params.fact_id)?t:""),a=String(null!=(r=e.params.fact_text)?r:"");return!n||g.current.has(n)||(g.current.add(n),s({type:"save",factId:n,factText:a.replace(/\s+/g," ").trim()})),{success:!0}}return{success:!1}},onResponseEnd:()=>{a()},onResponseStart:()=>{S({integration:null,retryable:!1})},onThreadChange:()=>{g.current.clear()},onError:e=>{let{error:t}=e;console.error("ChatKit error",t)}}),O=null!=(t=x.session)?t:x.integration,A=null!=(r=x.script)?r:O;return(0,l.jsxs)("div",{className:"relative pb-8 flex h-[90vh] w-full rounded-2xl flex-col overflow-hidden bg-white shadow-sm transition-colors dark:bg-slate-900",children:[(0,l.jsx)(o,{control:T.control,className:A||k?"pointer-events-none opacity-0":"block h-full w-full"},N),(0,l.jsx)(p,{error:A,fallbackMessage:A||!k?null:"Loading assistant session...",onRetry:A&&x.retryable?L:null,retryLabel:"Restart chat"})]})}let x="chatkit-color-scheme";function w(){if("function"!=typeof window.matchMedia)return null;try{return window.matchMedia("(prefers-color-scheme: dark)")}catch(e){return null}}function k(){let e=w();return(null==e?void 0:e.matches)?"dark":"light"}function y(){return"light"}function v(e){let t=w();if(!t)return()=>{};let r=()=>e();return"function"==typeof t.addEventListener?(t.addEventListener("change",r),()=>t.removeEventListener("change",r)):"function"==typeof t.addListener?(t.addListener(r),()=>t.removeListener(r)):()=>{}}function j(){try{let e=window.localStorage.getItem(x);if("light"===e||"dark"===e)return e;return"system"===e?"system":null}catch(e){return null}}function E(){let{scheme:e,setScheme:t,preference:r,setPreference:n,resetPreference:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=(0,i.useSyncExternalStore)(v,k,y),[r,n]=(0,i.useState)(()=>{var t;return null!=(t=j())?t:e}),s=(0,i.useMemo)(()=>"system"===r?t:r,[r,t]);(0,i.useEffect)(()=>{try{"system"===r?window.localStorage.removeItem(x):window.localStorage.setItem(x,r)}catch(e){}},[r]),(0,i.useEffect)(()=>{!function(e){if("undefined"==typeof document)return;let t=document.documentElement;t.dataset.colorScheme=e,t.classList.toggle("dark","dark"===e),t.style.colorScheme=e}(s)},[s]),(0,i.useEffect)(()=>{let e=e=>{e.key===x&&n(e=>{let t=j();return null!=t?t:e})};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let a=(0,i.useCallback)(e=>{n(e)},[]);return{scheme:s,preference:r,setScheme:(0,i.useCallback)(e=>{n(e)},[]),setPreference:a,resetPreference:(0,i.useCallback)(()=>{n("system")},[])}}(),a=(0,i.useCallback)(async e=>{},[]),o=(0,i.useCallback)(()=>{},[]),c=(0,i.useMemo)(()=>{switch(r){case"system":return"Auto";case"light":return"Light";case"dark":return"Dark";default:return"Theme"}},[r]),d=(0,i.useCallback)(()=>{n("light"===e?"dark":"light")},[e,n]);return(0,l.jsxs)("main",{className:"relative min-h-screen bg-slate-50 text-slate-900 transition-colors duration-500 dark:bg-slate-950 dark:text-slate-100",children:[(0,l.jsxs)("div",{className:"pointer-events-none absolute inset-0 -z-10 overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-200 via-white/40 to-slate-300 opacity-80 dark:from-slate-900 dark:via-slate-950/60 dark:to-slate-900"}),(0,l.jsx)("div",{className:"absolute left-1/2 top-16 h-96 w-96 -translate-x-1/2 rounded-full bg-blue-400/40 blur-3xl dark:bg-indigo-500/30"}),(0,l.jsx)("div",{className:"absolute bottom-10 right-10 h-72 w-72 rounded-full bg-emerald-400/40 blur-3xl dark:bg-emerald-500/30"})]}),(0,l.jsxs)("div",{className:"relative mx-auto flex min-h-screen w-full max-w-6xl flex-col px-6 py-10 sm:px-10 lg:px-16",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"rounded-full bg-slate-900 px-3 py-1 text-sm font-semibold uppercase tracking-[0.2em] text-white shadow-sm dark:bg-white/10 dark:text-white",children:"ChatKit"}),(0,l.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"OpenAI Starter Experience"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsxs)("button",{type:"button",onClick:d,className:"group flex items-center gap-2 rounded-full border border-slate-200 bg-white/70 px-4 py-2 text-sm font-medium text-slate-700 shadow-sm backdrop-blur transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-white/10 dark:bg-white/10 dark:text-white",children:[(0,l.jsx)("span",{"aria-hidden":!0,className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-900 text-xs text-white transition group-hover:scale-105 dark:bg-white/20",children:"light"===e?"☀️":"\uD83C\uDF19"}),c]}),(0,l.jsx)("button",{type:"button",onClick:s,className:"rounded-full border border-transparent bg-slate-900 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:bg-white/10",children:"Reset Theme"})]})]}),(0,l.jsxs)("section",{className:"mt-12 grid flex-1 gap-10 lg:grid-cols-[1.05fr_1fr] lg:items-start",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-between gap-10",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h1",{className:"text-4xl font-semibold leading-tight text-slate-900 dark:text-white sm:text-5xl lg:text-6xl",children:"Build delightful chat experiences in minutes."}),(0,l.jsx)("p",{className:"max-w-xl text-lg text-slate-600 dark:text-slate-300",children:"Experiment with OpenAI ChatKit using a polished playground interface. Customize the panel, iterate on workflows, and ship human-grade conversations faster than ever."})]}),(0,l.jsxs)("dl",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,l.jsxs)("div",{className:"rounded-2xl border border-white/40 bg-white/70 p-6 shadow-sm backdrop-blur dark:border-white/10 dark:bg-white/5",children:[(0,l.jsx)("dt",{className:"text-sm uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Launch-ready"}),(0,l.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-white",children:"Production quality UI"})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/40 bg-white/70 p-6 shadow-sm backdrop-blur dark:border-white/10 dark:bg-white/5",children:[(0,l.jsx)("dt",{className:"text-sm uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Flexible"}),(0,l.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-white",children:"Drop-in web component"})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-white/40 bg-white/70 p-6 shadow-sm backdrop-blur dark:border-white/10 dark:bg-white/5",children:[(0,l.jsx)("dt",{className:"text-sm uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Customizable"}),(0,l.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-slate-900 dark:text-white",children:"Theme & workflow aware"})]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-blue-500/30 via-indigo-500/20 to-emerald-500/30 blur-3xl transition duration-700 dark:from-blue-400/20 dark:via-purple-500/20 dark:to-emerald-400/20"}),(0,l.jsx)("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-2xl backdrop-blur-xl ring-1 ring-black/5 transition duration-500 dark:border-white/10 dark:bg-slate-900/80 dark:ring-white/10",children:(0,l.jsx)(g,{theme:e,onWidgetAction:a,onResponseEnd:o,onThemeRequest:t})})]})]})]})]})}},9434:(e,t,r)=>{Promise.resolve().then(r.bind(r,860))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9434)),_N_E=e.O()}]);